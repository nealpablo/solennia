<!-- /partials/modals.html -->

<!-- ðŸŸ¡ Global Toast (in-app notification; no more browser alerts) -->
<div id="toastContainer" class="fixed top-4 inset-x-0 z-[10000] flex justify-center pointer-events-none hidden">
  <div id="toast"
       class="pointer-events-auto max-w-md w-[92%] md:w-auto rounded-xl shadow-xl border px-4 py-3 text-sm bg-white border-gray-300"
       role="status" aria-live="polite"></div>
</div>

<!-- âœ… AUTH BACKDROP -->
<div id="authBackdrop" class="fixed inset-0 bg-black/50 hidden items-center justify-center z-[9999]">
  <!-- LOGIN MODAL -->
  <div
    id="loginModal"
    class="bg-[#f6f0e8] rounded-2xl shadow-xl w/full max-w-md mx-auto hidden p-8 relative"
    onclick="event.stopPropagation()"
  >
    <button data-close class="absolute top-3 right-3 text-gray-600 hover:text-black text-xl" aria-label="Close">&times;</button>
    <h2 class="text-2xl font-semibold mb-4 text-center">Login to Solennia</h2>

    <!-- Optional inline info/error area -->
    <p id="loginError" class="hidden mb-3 text-sm px-3 py-2 rounded-md bg-red-100 text-red-700 border border-red-300"></p>

    <!-- Inline validation so it works even when injected -->
    <form id="loginForm" class="space-y-4" novalidate>
      <div>
        <label for="loginUsername" class="block text-sm font-medium mb-1">Email or Username</label>
        <input
          type="text"
          id="loginUsername"
          name="username"
          required
          class="w-full border border-gray-400 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#7a5d47]"
          oninput="
            (function(el){
              const v = el.value.trim();
              const looksEmail = v.includes('@');
              if (looksEmail && !v.toLowerCase().endsWith('.com')) {
                el.setCustomValidity('Invalid email â€” must end with .com (or use your username)');
              } else {
                el.setCustomValidity('');
              }
            })(this)
          "
          oninvalid="
            (function(el){
              const v = el.value.trim();
              if (!v) { el.setCustomValidity('Please enter your email or username'); return; }
              const looksEmail = v.includes('@');
              if (looksEmail && !v.toLowerCase().endsWith('.com')) {
                el.setCustomValidity('Invalid email â€” must end with .com (or use your username)');
              } else {
                el.setCustomValidity('');
              }
            })(this)
          "
        />
      </div>

      <div>
        <label for="loginPassword" class="block text-sm font-medium mb-1">Password</label>
        <input type="password" id="loginPassword" name="password" required
          class="w-full border border-gray-400 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#7a5d47]" />
      </div>

      <button type="submit"
        class="w-full bg-[#7a5d47] text-white py-2 rounded-lg font-semibold hover:opacity-90 transition">Login</button>

      <p class="text-sm text-center mt-3">
        No account yet?
        <a href="#" id="switchToRegister" class="text-[#7a5d47] hover:underline">Register</a>
      </p>
    </form>
  </div>

  <!-- REGISTER MODAL -->
  <div
    id="registerModal"
    class="bg-[#f6f0e8] rounded-2xl shadow-xl w/full max-w-md mx-auto hidden p-8 relative"
    onclick="event.stopPropagation()"
  >
    <button data-close class="absolute top-3 right-3 text-gray-600 hover:text-black text-xl" aria-label="Close">&times;</button>
    <h2 class="text-2xl font-semibold mb-4 text-center">Create Your Account</h2>

    <!-- Inline error area -->
    <p id="registerError" class="hidden mb-3 text-sm px-3 py-2 rounded-md bg-red-100 text-red-700 border border-red-300"></p>

    <form id="registerForm" class="space-y-4" novalidate>
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label for="registerFirstName" class="block text-sm font-medium mb-1">First Name</label>
          <input type="text" id="registerFirstName" name="first_name" required
            class="w-full border border-gray-400 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#7a5d47]" />
        </div>
        <div>
          <label for="registerLastName" class="block text-sm font-medium mb-1">Last Name</label>
          <input type="text" id="registerLastName" name="last_name" required
            class="w-full border border-gray-400 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#7a5d47]" />
        </div>
      </div>

      <div>
        <label for="registerEmail" class="block text-sm font-medium mb-1">Email</label>
        <input
          type="email"
          id="registerEmail"
          name="email"
          required
          pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.com$"
          title="Email must end with .com"
          class="w-full border border-gray-400 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#7a5d47]"
        />
      </div>

      <div>
        <label for="registerUsername" class="block text-sm font-medium mb-1">Username</label>
        <input type="text" id="registerUsername" name="username" required
          class="w-full border border-gray-400 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#7a5d47]" />
      </div>

      <div>
        <label for="registerPassword" class="block text-sm font-medium mb-1">Password</label>
        <input type="password" id="registerPassword" name="password" required minlength="6"
          class="w-full border border-gray-400 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#7a5d47]"
          oninput="document.getElementById('registerConfirmPassword')?.dispatchEvent(new Event('input'))"
        />
      </div>

      <div>
        <label for="registerConfirmPassword" class="block text-sm font-medium mb-1">Confirm Password</label>
        <input
          type="password"
          id="registerConfirmPassword"
          name="confirm_password"
          required
          minlength="6"
          class="w-full border border-gray-400 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#7a5d47]"
          oninput="
            (function(el){
              const p = document.getElementById('registerPassword');
              if (p && el.value !== p.value) {
                el.setCustomValidity('Passwords do not match');
                document.getElementById('registerPasswordError')?.classList.remove('hidden');
              } else {
                el.setCustomValidity('');
                document.getElementById('registerPasswordError')?.classList.add('hidden');
              }
            })(this)
          "
          oninvalid="this.setCustomValidity('Passwords do not match')"
        />
        <p id="registerPasswordError" class="hidden text-sm text-red-600 mt-1">Passwords do not match</p>
      </div>

      <button type="submit"
        class="w-full bg-[#7a5d47] text-white py-2 rounded-lg font-semibold hover:opacity-90 transition">Register</button>

      <p class="text-sm text-center mt-3">
        Already have an account?
        <a href="#" id="switchToLogin" class="text-[#7a5d47] hover:underline">Login</a>
      </p>
    </form>
  </div>
</div>

<!-- Feedback Modal (kept) -->
<div id="feedbackModal" class="hidden fixed inset-0 z-[260] bg-black/40 flex items-center justify-center p-4">
  <div class="bg-[#f6f0e8] w-full max-w-md rounded-2xl shadow-xl border border-gray-300 overflow-hidden" onclick="event.stopPropagation()">
    <div class="flex justify-between items-center px-6 py-4 border-b border-gray-300 bg-[#e8ddae]">
      <h3 class="text-lg font-semibold tracking-wide">Your Feedback</h3>
      <button id="closeFeedback" class="text-2xl font-light hover:text-gray-600" aria-label="Close">&times;</button>
    </div>
    <form id="feedbackForm" class="px-6 py-5 space-y-4">
      <div>
        <label class="block text-sm font-medium mb-1">How was your experience?</label>
        <textarea name="message" rows="4" placeholder="Type your feedback here..." required
                  class="w-full rounded-lg border border-gray-300 bg-white focus:ring-2 focus:ring-[#7a5d47] focus:border-[#7a5d47] p-2 text-sm"></textarea>
      </div>
      <div class="flex justify-end">
        <button type="submit" class="px-6 py-2 rounded-md bg-[#7a5d47] text-white font-semibold hover:opacity-90">Send Feedback</button>
      </div>
    </form>
  </div>
</div>

<!-- Privacy Modal (UPDATED) -->
<div id="privacyModal" class="hidden fixed inset-0 z-[270] bg-black/40 flex items-center justify-center p-4">
  <div class="bg-[#f6f0e8] w-full max-w-2xl rounded-2xl shadow-xl border border-gray-300 overflow-hidden" onclick="event.stopPropagation()">
    <div class="flex justify-between items-center px-6 py-4 border-b border-gray-300 bg-[#e8ddae]">
      <h3 class="text-lg font-semibold tracking-wide">Privacy Policy</h3>
      <button id="closePrivacy" class="text-2xl font-light hover:text-gray-600" aria-label="Close">&times;</button>
    </div>
    <div class="p-6 space-y-4 text-sm leading-relaxed text-gray-800 max-h-[70vh] overflow-y-auto">
      <p><strong>Introduction</strong><br>
        At Solennia, we are committed to protecting your privacy and ensuring that your personal information is handled responsibly. This Privacy Policy outlines how we collect, use, store, and share information when you use our mobile application or website. By using Solennia, you agree to the terms described in this policy.
      </p>
      <p><strong>Information We Collect</strong><br>
        We may collect personal data including your name, email address, contact number, and information related to your wedding plans. For vendors, we may collect business details such as company name, service descriptions, photos, and relevant documentation. Additionally, we gather non-personal information such as usage statistics, device information, and location data to help enhance our services and provide a more personalized user experience.
      </p>
      <p><strong>How We Use Your Information</strong><br>
        The information we collect is used solely to operate and improve our platform. This includes matching couples with suitable vendors, facilitating communication, managing bookings, sending relevant updates or promotional messages (which you may opt out of), and ensuring platform security.
      </p>
      <p><strong>Sharing of Information</strong><br>
        Your data is never sold to third parties. However, in certain cases, we may share your information with trusted service providers who assist us in delivering our services, or with legal authorities if required by law.
      </p>
      <p><strong>Data Protection</strong><br>
        We prioritize your privacy and employ appropriate security measures such as encryption and secure servers to protect your data. Nonetheless, users are encouraged to keep their login credentials secure, as no system can be completely immune to risk.
      </p>
      <p><strong>Your Rights</strong><br>
        You have the right to access, update, or delete your personal data at any time. If you wish to deactivate your account or request the removal of your information, you may contact us directly.
      </p>
      <p><strong>Cookies & Tracking</strong><br>
        We use cookies and tracking technologies to analyze usage patterns and improve site functionality; you can adjust your browser settings to manage cookie preferences.
      </p>
      <p><strong>Third-Party Links</strong><br>
        Solennia may contain links to third-party websites, including vendor pages and external services. Please note that we are not responsible for the privacy practices of these third parties, and we encourage users to review their respective policies.
      </p>
      <p><strong>Childrenâ€™s Privacy</strong><br>
        Our platform is not intended for children under the age of 13, and we do not knowingly collect personal information from minors. If we become aware of such data, it will be promptly deleted.
      </p>
      <p><strong>Policy Updates</strong><br>
        This policy may be updated periodically to reflect changes in our services or legal obligations. We will notify users of significant updates through email or in-app notifications.
      </p>
      <p><strong>Contact</strong><br>
        If you have any questions or concerns regarding this Privacy Policy, you may contact us at <a href="mailto:solenniainquires@gmail.com" class="underline">solenniainquires@gmail.com</a>. We are committed to maintaining your trust and safeguarding your privacy at every stage of your wedding planning journey.
      </p>
    </div>
  </div>
</div>

<!-- Terms Modal (UPDATED) -->
<div id="termsModal" class="hidden fixed inset-0 z-[275] bg-black/40 flex items-center justify-center p-4">
  <div class="bg-[#f6f0e8] w-full max-w-4xl rounded-2xl shadow-xl border border-gray-300 overflow-hidden" onclick="event.stopPropagation()">
    <div class="flex justify-between items-center px-6 py-4 border-b border-gray-300 bg-[#e8ddae]">
      <h3 class="text-xl font-semibold tracking-wide">Terms and Conditions</h3>
      <button id="closeTerms" class="text-2xl font-light hover:text-gray-600" aria-label="Close">&times;</button>
    </div>
    <div class="p-6 space-y-5 text-sm leading-relaxed text-gray-800 max-h-[70vh] overflow-y-auto">
      <p><strong>Acceptance of Terms</strong><br>
        Welcome to Solennia. By accessing or using our website, mobile application, or any services provided through our platform, you agree to be bound by the following Terms and Conditions. Please read them carefully. If you do not agree with these terms, you must refrain from using our platform.
      </p>
      <p><strong>About Solennia</strong><br>
        Solennia is a digital platform designed to connect couples planning their weddings with professional vendors offering relevant services. These services may include, but are not limited to, venue rentals, catering, photography, floral design, gown rentals, and entertainment. Our goal is to simplify and personalize the wedding planning experience through smart tools, including our AI-based wedding assistant.
      </p>
      <p><strong>User Accounts & Vendor Content</strong><br>
        All usersâ€”whether couples or vendorsâ€”must provide accurate and truthful information during registration. Vendors are responsible for ensuring that the content they submit, including photos, descriptions, and business information, is lawful, not misleading, and does not infringe on any third-party rights. Solennia reserves the right to verify, approve, or reject listings that do not meet quality standards or violate our policies.
      </p>
      <p><strong>Role as Intermediary</strong><br>
        Users understand that Solennia acts only as an intermediary between clients and vendors. While we facilitate the discovery and connection process, Solennia is not responsible for any agreements, disputes, payments, or service outcomes between the two parties. All bookings, negotiations, and final arrangements are handled directly by the user and vendor. Solennia is not liable for any damages, losses, or service failures resulting from interactions on the platform.
      </p>
      <p><strong>Vendor Responsibilities</strong><br>
        Vendors who apply to be listed on Solennia agree to be professional, responsive, and transparent in their communications and services. They must not engage in fraudulent, abusive, or unethical behavior. Solennia may suspend or terminate accounts that violate our community standards or receive repeated complaints.
      </p>
      <p><strong>Privacy</strong><br>
        Solennia respects user privacy and data security. All information collected is handled in accordance with our Privacy Policy. By using the platform, you consent to the collection and use of your information as outlined in that policy.
      </p>
      <p><strong>Changes to Terms</strong><br>
        We reserve the right to update or modify these Terms and Conditions at any time without prior notice. Changes will be effective upon posting on the website or app. Continued use of Solennia after such changes indicates your acceptance of the updated terms.
      </p>
      <p><strong>Contact</strong><br>
        If you have any questions regarding these terms, you may contact us at <a href="mailto:solenniainquires@gmail.com" class="underline">solenniainquires@gmail.com</a>. Thank you for being a part of the Solennia community. Weâ€™re here to support your journey toward a seamless and memorable wedding experience.
      </p>
    </div>
  </div>
</div>

<!-- Vendor Onboarding (Vendor Terms UPDATED) -->
<div id="vendorTerms" class="fixed inset-0 hidden z-[200] grid place-items-center bg-black/40 p-4">
  <div class="bg-[#f6f0e8] w-full max-w-3xl rounded-2xl shadow-xl overflow-y-auto max-h-[80vh]" onclick="event.stopPropagation()">
    <div class="flex justify-between items-center p-6 border-b border-gray-300">
      <h2 class="text-xl font-semibold">Terms & Conditions</h2>
      <button data-closevendor class="text-2xl font-light" aria-label="Close">&times;</button>
    </div>
    <div class="p-6 space-y-4 text-sm leading-relaxed text-gray-800">
      <p>
        By applying to become a vendor on Solennia, you agree to the following terms and conditions. Solennia is a wedding planning platform that helps couples connect with trusted service providers like you. Participation on the platform is entirely voluntary, and by submitting your application, you acknowledge that your inclusion is subject to review and approval by the Solennia team. Approval is not guaranteed, and Solennia reserves the right to accept or decline any vendor based on quality, authenticity, and service alignment.
      </p>
      <p>
        As a vendor, you are responsible for providing accurate and up-to-date information about your business, including your services, pricing, photos, and availability. You agree to respond to client inquiries in a timely manner and to provide professional and reliable service to all clients connected through the platform. You confirm that all content you upload (such as images, logos, and testimonials) is either owned by you or you have full rights to use it. By listing with Solennia, you grant the platform permission to display your business profile and media across the platform, in marketing materials, or on social channels, to promote your services.
      </p>
      <p>
        Currently, listing your services on Solennia is free of charge. If any fees, subscriptions, or commission-based models are introduced in the future, you will be notified in advance and given the option to continue or withdraw from the platform. You are free to request updates to your profile or ask for removal at any time.
      </p>
      <p>
        Solennia acts only as a facilitator between clients and vendors. We do not control or guarantee the outcome of any agreements, bookings, or payments between you and your clients. Therefore, you are solely responsible for your transactions, communication, and the quality of services delivered. Solennia will not be held liable for any disputes, damages, or losses arising from these interactions.
      </p>
      <p>
        Solennia reserves the right to remove any vendor from the platform at any time if false or misleading information is found, if there are repeated client complaints, or if there is a breach of professionalism or trust. Inactivity or unresponsiveness may also lead to removal.
      </p>
      <p>
        We are committed to respecting your privacy. Any data you share will be handled according to our Privacy Policy and will not be sold or distributed without your consent.
      </p>
      <p>
        By applying to Solennia as a vendor, you confirm that you have read, understood, and agree to these terms and conditions. For questions or support, you may contact us at <a href="mailto:vendors@solennia.com" class="underline">vendors@solennia.com</a>.
      </p>
    </div>
    <div class="p-6 border-t border-gray-300 flex justify-end">
      <button id="agreeTerms" class="px-6 py-2 rounded-md bg-[#e8ddae] hover:bg-[#dbcf9f] font-medium">Agree and Continue</button>
    </div>
  </div>
</div>

<div id="vendorBackground" class="fixed inset-0 hidden z-[200] grid place-items-center bg-black/40 p-4">
  <div class="bg-[#f6f0e8] w-full max-w-2xl rounded-2xl shadow-xl overflow-y-auto max-h-[80vh]" onclick="event.stopPropagation()">
    <div class="flex justify-between items-center p-6 border-b border-gray-300">
      <h2 class="text-lg font-semibold">Become a Vendor!</h2>
      <button data-closevendor class="text-2xl font-light" aria-label="Close">&times;</button>
    </div>

    <form id="vendorForm1" class="p-6 space-y-5">
      <div>
        <label class="block text-sm font-semibold uppercase">Business Name <span class="text-red-600">*</span></label>
        <input name="business_name" required class="mt-1 w-full rounded-md bg-gray-100 border border-gray-300 p-2" />
      </div>

      <!-- Contact Email (.com only) -->
      <div>
        <label class="block text-sm font-semibold uppercase">Contact Email <span class="text-red-600">*</span></label>
        <input
          type="email"
          name="contact_email"
          required
          pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.com$"
          title="Email must end with .com"
          class="mt-1 w-full rounded-md bg-gray-100 border border-gray-300 p-2"
        />
      </div>

      <div>
        <label class="block text-sm font-semibold uppercase">Category <span class="text-red-600">*</span></label>
        <select
          name="category"
          id="vendorCategory"
          required
          class="mt-1 w-full rounded-md bg-gray-100 border border-gray-300 p-2"
        >
          <option value="">Select a category</option>
          <option value="Venue">Venue</option>
          <option value="Catering">Catering</option>
          <option value="Photography & Videography">Photography & Videography</option>
          <option value="Decoration">Decoration</option>
          <option value="Entertainment">Entertainment</option>
          <option value="Others">Others</option>
        </select>
        <!-- NOTE: not required by default to avoid blocking when hidden -->
        <input
          type="text"
          id="vendorCategoryOther"
          name="category_other"
          placeholder="Please specify your category"
          class="mt-2 w-full rounded-md bg-gray-100 border border-gray-300 p-2 hidden"
        />
      </div>

      <div>
        <label class="block text-sm font-semibold uppercase">Business Address / Service Areas <span class="text-red-600">*</span></label>
        <textarea name="address" required class="mt-1 w-full rounded-md bg-gray-100 border border-gray-300 p-2"></textarea>
      </div>

      <div class="flex justify-end">
        <!-- You canâ€™t advance unless step 1 is valid -->
        <button type="button" id="toMedia" class="w-10 h-10 bg-[#7a5d47] rounded-full text-white flex items-center justify-center">âžœ</button>
      </div>
    </form>
  </div>
</div>

<div id="vendorMedia" class="fixed inset-0 hidden z-[200] grid place-items-center bg-black/40 p-4">
  <div class="bg-[#f6f0e8] w-full max-w-2xl rounded-2xl shadow-xl overflow-y-auto max-h-[80vh]" onclick="event.stopPropagation()">
    <div class="flex justify-between items-center p-6 border-b border-gray-300">
      <h2 class="text-lg font-semibold">Media & Content</h2>
      <button data-closevendor class="text-2xl font-light" aria-label="Close">&times;</button>
    </div>

    <form id="vendorForm2" class="p-6 space-y-5" enctype="multipart/form-data">
      <div>
        <label class="block text-sm font-semibold uppercase">Description of Services <span class="text-red-600">*</span></label>
        <textarea name="description" required class="mt-1 w-full rounded-md bg-gray-100 border border-gray-300 p-2"></textarea>
      </div>

      <div>
        <label class="block text-sm font-semibold uppercase">Package List/Sample Pricing <span class="text-red-600">*</span></label>
        <textarea name="pricing" required class="mt-1 w-full rounded-md bg-gray-100 border border-gray-300 p-2"></textarea>
      </div>

      <!-- Files (PNG/JPG/PDF) -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div>
          <label class="block text-xs font-semibold uppercase mb-1">Permits (PNG/JPG/PDF) <span class="text-red-600">*</span></label>
          <input id="vendorPermits" name="permits" type="file" required
                 accept=".png,.jpg,.jpeg,.pdf,image/png,image/jpeg,application/pdf"
                 class="w-full rounded-md bg-gray-100 border border-gray-300 p-2" />
        </div>
        <div>
          <label class="block text-xs font-semibold uppercase mb-1">Gov ID (PNG/JPG/PDF) <span class="text-red-600">*</span></label>
          <input id="vendorGovId" name="gov_id" type="file" required
                 accept=".png,.jpg,.jpeg,.pdf,image/png,image/jpeg,application/pdf"
                 class="w-full rounded-md bg-gray-100 border border-gray-300 p-2" />
        </div>
        <div>
          <label class="block text-xs font-semibold uppercase mb-1">Portfolio (PNG/JPG/PDF) <span class="text-red-600">*</span></label>
          <input id="vendorPortfolio" name="portfolio" type="file" required
                 accept=".png,.jpg,.jpeg,.pdf,image/png,image/jpeg,application/pdf"
                 class="w-full rounded-md bg-gray-100 border border-gray-300 p-2" />
        </div>
      </div>

      <div class="flex justify-end pt-4">
        <button id="submitVendor" class="px-5 py-2 bg-[#e8ddae] hover:bg-[#dbcf9f] text-sm font-medium">Make Listing</button>
      </div>
    </form>
  </div>
</div>
