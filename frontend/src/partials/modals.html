<!-- /partials/modals.html -->

<!-- ✅ AUTH BACKDROP (kept) -->
<div id="authBackdrop" class="fixed inset-0 bg-black/50 hidden items-center justify-center z-[9999]">
  <!-- LOGIN MODAL -->
  <div
    id="loginModal"
    class="bg-[#f6f0e8] rounded-2xl shadow-xl w-full max-w-md mx-auto hidden p-8 relative"
    onclick="event.stopPropagation()"
  >
    <button data-close class="absolute top-3 right-3 text-gray-600 hover:text-black text-xl">&times;</button>
    <h2 class="text-2xl font-semibold mb-4 text-center">Login to Solennia</h2>

    <!-- Inline validation so it works even when injected -->
    <form id="loginForm" class="space-y-4" novalidate>
      <div>
        <label for="loginUsername" class="block text-sm font-medium mb-1">Email or Username</label>
        <input
          type="text"
          id="loginUsername"
          name="username"
          required
          class="w-full border border-gray-400 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#7a5d47]"
          oninput="
            (function(el){
              const v = el.value.trim();
              const looksEmail = v.includes('@');
              if (looksEmail && !v.toLowerCase().endsWith('.com')) {
                el.setCustomValidity('Invalid email — must end with .com (or use your username)');
              } else {
                el.setCustomValidity('');
              }
            })(this)
          "
          oninvalid="
            (function(el){
              const v = el.value.trim();
              if (!v) { el.setCustomValidity('Please enter your email or username'); return; }
              const looksEmail = v.includes('@');
              if (looksEmail && !v.toLowerCase().endsWith('.com')) {
                el.setCustomValidity('Invalid email — must end with .com (or use your username)');
              } else {
                el.setCustomValidity('');
              }
            })(this)
          "
        />
      </div>

      <div>
        <label for="loginPassword" class="block text-sm font-medium mb-1">Password</label>
        <input type="password" id="loginPassword" name="password" required
          class="w-full border border-gray-400 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#7a5d47]" />
      </div>

      <p id="loginError" class="hidden text-sm text-red-600"></p>

      <button type="submit"
        class="w-full bg-[#7a5d47] text-white py-2 rounded-lg font-semibold hover:opacity-90 transition">Login</button>

      <p class="text-sm text-center mt-3">
        No account yet? <a href="#" id="switchToRegister" class="text-[#7a5d47] hover:underline">Register</a>
      </p>
    </form>
  </div>

  <!-- REGISTER MODAL -->
  <div
    id="registerModal"
    class="bg-[#f6f0e8] rounded-2xl shadow-xl w-full max-w-md mx-auto hidden p-8 relative"
    onclick="event.stopPropagation()"
  >
    <button data-close class="absolute top-3 right-3 text-gray-600 hover:text-black text-xl">&times;</button>
    <h2 class="text-2xl font-semibold mb-4 text-center">Create Your Account</h2>

    <form id="registerForm" class="space-y-4" novalidate>
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label for="registerFirstName" class="block text-sm font-medium mb-1">First Name</label>
          <input type="text" id="registerFirstName" name="first_name" required
            class="w-full border border-gray-400 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#7a5d47]" />
        </div>
        <div>
          <label for="registerLastName" class="block text-sm font-medium mb-1">Last Name</label>
          <input type="text" id="registerLastName" name="last_name" required
            class="w-full border border-gray-400 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#7a5d47]" />
        </div>
      </div>

      <div>
        <label for="registerEmail" class="block text-sm font-medium mb-1">Email</label>
        <input
          type="email"
          id="registerEmail"
          name="email"
          required
          pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.com$"
          title="Email must end with .com"
          class="w-full border border-gray-400 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#7a5d47]"
        />
      </div>

      <div>
        <label for="registerUsername" class="block text-sm font-medium mb-1">Username</label>
        <input type="text" id="registerUsername" name="username" required
          class="w-full border border-gray-400 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#7a5d47]" />
      </div>

      <div>
        <label for="registerPassword" class="block text-sm font-medium mb-1">Password</label>
        <input type="password" id="registerPassword" name="password" required minlength="6"
          class="w-full border border-gray-400 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#7a5d47]"
          oninput="document.getElementById('registerConfirmPassword')?.dispatchEvent(new Event('input'))"
        />
      </div>

      <div>
        <label for="registerConfirmPassword" class="block text-sm font-medium mb-1">Confirm Password</label>
        <input
          type="password"
          id="registerConfirmPassword"
          name="confirm_password"
          required
          minlength="6"
          class="w-full border border-gray-400 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#7a5d47]"
          oninput="
            (function(el){
              const p = document.getElementById('registerPassword');
              if (p && el.value !== p.value) {
                el.setCustomValidity('Passwords do not match');
              } else {
                el.setCustomValidity('');
              }
            })(this)
          "
          oninvalid="this.setCustomValidity('Passwords do not match')"
        />
        <p id="registerPasswordError" class="hidden text-sm text-red-600 mt-1">Passwords do not match</p>
      </div>

      <p id="registerError" class="hidden text-sm text-red-600"></p>

      <button type="submit"
        class="w-full bg-[#7a5d47] text-white py-2 rounded-lg font-semibold hover:opacity-90 transition">Register</button>

      <p class="text-sm text-center mt-3">
        Already have an account? <a href="#" id="switchToLogin" class="text-[#7a5d47] hover:underline">Login</a>
      </p>
    </form>
  </div>
</div>

<!-- Feedback Modal (kept) -->
<div id="feedbackModal" class="hidden fixed inset-0 z-[260] bg-black/40 flex items-center justify-center p-4">
  <div class="bg-[#f6f0e8] w-full max-w-md rounded-2xl shadow-xl border border-gray-300 overflow-hidden" onclick="event.stopPropagation()">
    <div class="flex justify-between items-center px-6 py-4 border-b border-gray-300 bg-[#e8ddae]">
      <h3 class="text-lg font-semibold tracking-wide">Your Feedback</h3>
      <button id="closeFeedback" class="text-2xl font-light hover:text-gray-600" aria-label="Close">&times;</button>
    </div>
    <form id="feedbackForm" class="px-6 py-5 space-y-4">
      <div>
        <label class="block text-sm font-medium mb-1">How was your experience?</label>
        <textarea name="message" rows="4" placeholder="Type your feedback here..." required
                  class="w-full rounded-lg border border-gray-300 bg-white focus:ring-2 focus:ring-[#7a5d47] focus:border-[#7a5d47] p-2 text-sm"></textarea>
      </div>
      <div class="flex justify-end">
        <button type="submit" class="px-6 py-2 rounded-md bg-[#7a5d47] text-white font-semibold hover:opacity-90">Send Feedback</button>
      </div>
    </form>
  </div>
</div>

<!-- Privacy Modal (kept) -->
<div id="privacyModal" class="hidden fixed inset-0 z-[270] bg-black/40 flex items-center justify-center p-4">
  <div class="bg-[#f6f0e8] w-full max-w-2xl rounded-2xl shadow-xl border border-gray-300 overflow-hidden" onclick="event.stopPropagation()">
    <div class="flex justify-between items-center px-6 py-4 border-b border-gray-300 bg-[#e8ddae]">
      <h3 class="text-lg font-semibold tracking-wide">Privacy Policy</h3>
      <button id="closePrivacy" class="text-2xl font-light hover:text-gray-600" aria-label="Close">&times;</button>
    </div>
    <div class="p-6 space-y-4 text-sm leading-relaxed text-gray-800 max-h-[70vh] overflow-y-auto">
      <p><strong>1. Introduction</strong><br />Solennia values your privacy. This Privacy Policy outlines how we collect, use, and protect your information.</p>
      <p><strong>2. Information We Collect</strong><br />We may collect personal information such as your name, email, and contact details when you register or interact with our platform.</p>
      <p><strong>3. How We Use Your Information</strong><br />Information collected is used to improve user experience, process vendor applications, and enhance our services.</p>
      <p><strong>4. Data Protection</strong><br />We implement appropriate technical and organizational measures to protect your data against unauthorized access or disclosure.</p>
      <p><strong>5. Cookies</strong><br />Our website may use cookies to personalize your experience and analyze site usage. You can disable cookies in your browser settings.</p>
      <p><strong>6. Sharing of Data</strong><br />We do not sell your personal data. Limited data may be shared with trusted partners strictly for operational purposes.</p>
      <p><strong>7. Your Rights</strong><br />You may request access, correction, or deletion of your personal data by contacting us at solenniainquires@gmail.com.</p>
      <p><strong>8. Policy Updates</strong><br />We may update this Privacy Policy periodically. Continued use of Solennia means you accept the latest version.</p>
      <p><strong>9. Contact</strong><br />For questions or concerns regarding your privacy, please contact solenniainquires@gmail.com.</p>
    </div>
  </div>
</div>

<!-- Terms Modal (kept) -->
<div id="termsModal" class="hidden fixed inset-0 z-[275] bg-black/40 flex items-center justify-center p-4">
  <div class="bg-[#f6f0e8] w-full max-w-4xl rounded-2xl shadow-xl border border-gray-300 overflow-hidden" onclick="event.stopPropagation()">
    <div class="flex justify-between items-center px-6 py-4 border-b border-gray-300 bg-[#e8ddae]">
      <h3 class="text-xl font-semibold tracking-wide">Terms and Conditions</h3>
      <button id="closeTerms" class="text-2xl font-light hover:text-gray-600" aria-label="Close">&times;</button>
    </div>
    <div class="p-6 space-y-5 text-sm leading-relaxed text-gray-800 max-h-[70vh] overflow-y-auto">
      <p>Welcome to Solennia. By accessing or using our website, mobile application, or any services provided through our platform, you agree to be bound by these Terms and Conditions...</p>
      <!-- (kept brief; same text as your pages) -->
    </div>
  </div>
</div>

<!-- Vendor Onboarding (kept, with .com email & Others toggle) -->
<div id="vendorTerms" class="fixed inset-0 hidden z-[200] grid place-items-center bg-black/40 p-4">
  <div class="bg-[#f6f0e8] w-full max-w-3xl rounded-2xl shadow-xl overflow-y-auto max-h-[80vh]" onclick="event.stopPropagation()">
    <div class="flex justify-between items-center p-6 border-b border-gray-300">
      <h2 class="text-xl font-semibold">Terms & Conditions</h2>
      <button data-closevendor class="text-2xl font-light" aria-label="Close">&times;</button>
    </div>
    <div class="p-6 space-y-4 text-sm leading-relaxed text-gray-800">
      <p>By applying to become a vendor on Solennia, you agree to the following terms and conditions...</p>
      <p>As a vendor, you are responsible for providing accurate and up-to-date information...</p>
      <p>Solennia acts only as a facilitator between clients and vendors...</p>
    </div>
    <div class="p-6 border-t border-gray-300 flex justify-end">
      <button id="agreeTerms" class="px-6 py-2 rounded-md bg-[#e8ddae] hover:bg-[#dbcf9f] font-medium">Agree and Continue</button>
    </div>
  </div>
</div>

<div id="vendorBackground" class="fixed inset-0 hidden z-[200] grid place-items-center bg-black/40 p-4">
  <div class="bg-[#f6f0e8] w-full max-w-2xl rounded-2xl shadow-xl overflow-y-auto max-h-[80vh]" onclick="event.stopPropagation()">
    <div class="flex justify-between items-center p-6 border-b border-gray-300">
      <h2 class="text-lg font-semibold">Become a Vendor!</h2>
      <button data-closevendor class="text-2xl font-light" aria-label="Close">&times;</button>
    </div>

    <form id="vendorForm1" class="p-6 space-y-5">
      <div>
        <label class="block text-sm font-semibold uppercase">Business Name <span class="text-red-600">*</span></label>
        <input name="business_name" required class="mt-1 w-full rounded-md bg-gray-100 border border-gray-300 p-2" />
      </div>

      <!-- NEW: Contact Email (.com only) -->
      <div>
        <label class="block text-sm font-semibold uppercase">Contact Email <span class="text-red-600">*</span></label>
        <input
          type="email"
          name="contact_email"
          required
          pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.com$"
          title="Email must end with .com"
          class="mt-1 w-full rounded-md bg-gray-100 border border-gray-300 p-2"
        />
      </div>

      <div>
        <label class="block text-sm font-semibold uppercase">Category</label>
        <select
          name="category"
          id="vendorCategory"
          class="mt-1 w-full rounded-md bg-gray-100 border border-gray-300 p-2"
          onchange="
            (function(sel){
              const o = document.getElementById('vendorCategoryOther');
              const show = sel.value==='Others';
              if (o){ o.classList.toggle('hidden', !show); o.required = show; if(show) o.focus(); }
            })(this)
          "
        >
          <option value="">Select a category</option>
          <option value="Venue">Venue</option>
          <option value="Catering">Catering</option>
          <option value="Photography & Videography">Photography & Videography</option>
          <option value="Decoration">Decoration</option>
          <option value="Entertainment">Entertainment</option>
          <option value="Others">Others</option>
        </select>
        <input
          type="text"
          id="vendorCategoryOther"
          name="category_other"
          placeholder="Please specify your category"
          class="mt-2 w-full rounded-md bg-gray-100 border border-gray-300 p-2 hidden"
        />
      </div>

      <div>
        <label class="block text-sm font-semibold uppercase">Business Address / Service Areas</label>
        <textarea name="address" class="mt-1 w-full rounded-md bg-gray-100 border border-gray-300 p-2"></textarea>
      </div>

      <div class="flex justify-end">
        <button type="button" id="toMedia" class="w-10 h-10 bg-[#7a5d47] rounded-full text-white flex items-center justify-center">➜</button>
      </div>
    </form>
  </div>
</div>

<div id="vendorMedia" class="fixed inset-0 hidden z-[200] grid place-items-center bg-black/40 p-4">
  <div class="bg-[#f6f0e8] w-full max-w-2xl rounded-2xl shadow-xl overflow-y-auto max-h-[80vh]" onclick="event.stopPropagation()">
    <div class="flex justify-between items-center p-6 border-b border-gray-300">
      <h2 class="text-lg font-semibold">Media & Content</h2>
      <button data-closevendor class="text-2xl font-light" aria-label="Close">&times;</button>
    </div>

    <form id="vendorForm2" class="p-6 space-y-5" enctype="multipart/form-data">
      <div>
        <label class="block text-sm font-semibold uppercase">Description of Services</label>
        <textarea name="description" class="mt-1 w-full rounded-md bg-gray-100 border border-gray-300 p-2"></textarea>
      </div>

      <div>
        <label class="block text-sm font-semibold uppercase">Package List/Sample Pricing</label>
        <textarea name="pricing" class="mt-1 w-full rounded-md bg-gray-100 border border-gray-300 p-2"></textarea>
      </div>

      <!-- Files (PNG/JPG/PDF) -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div>
          <label class="block text-xs font-semibold uppercase mb-1">Permits (PNG/JPG/PDF)</label>
          <input id="vendorPermits" name="permits" type="file"
                 accept=".png,.jpg,.jpeg,.pdf,image/png,image/jpeg,application/pdf"
                 class="w-full rounded-md bg-gray-100 border border-gray-300 p-2" />
        </div>
        <div>
          <label class="block text-xs font-semibold uppercase mb-1">Gov ID (PNG/JPG/PDF)</label>
          <input id="vendorGovId" name="gov_id" type="file"
                 accept=".png,.jpg,.jpeg,.pdf,image/png,image/jpeg,application/pdf"
                 class="w-full rounded-md bg-gray-100 border border-gray-300 p-2" />
        </div>
        <div>
          <label class="block text-xs font-semibold uppercase mb-1">Portfolio (PNG/JPG/PDF)</label>
          <input id="vendorPortfolio" name="portfolio" type="file"
                 accept=".png,.jpg,.jpeg,.pdf,image/png,image/jpeg,application/pdf"
                 class="w-full rounded-md bg-gray-100 border border-gray-300 p-2" />
        </div>
      </div>

      <div class="flex justify-end pt-4">
        <button id="submitVendor" class="px-5 py-2 bg-[#e8ddae] hover:bg-[#dbcf9f] text-sm font-medium">Make Listing</button>
      </div>
    </form>
  </div>
</div>
